<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <title>Sign Up Page</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
 

</head>

<body>

  <link rel="stylesheet" href="./stylesheets/header_footer.css">
  <header> 
    <div class="d-flex flex-row justify-content-between">
      <nav class="loginNav"> 
        <div class='d-flex flex-row'>
          <a href="profile.html" class="nav-link">PROFILE</a>
          <a href="" class="nav-link" id="logout">LOGOUT</a>
        </div>
      </nav>
    
      <div class="d-flex justify-content-center"> 
        <a href="dashboard.html" class="btn btn-primary btn-lg">GO TO DASHBOARD</a>
      </div>
    
        <nav id = 'nav-bar'>
          <div class="d-flex flex-row ml-5">
              <a href = "about.html" class="nav-link"> ABOUT </a>
              <a href = "login.html" class="nav-link"> LOGIN</a>
          </div>
        </nav>
    </div>    
  </header> <br><br>
  
  <script type="module">
    import {logOut, sessionValidation} from './javascript/script.js';
    document.getElementById('logout').addEventListener('click', logOut);
 
  </script>

  <div class="row justify-content-center" >
    <div class="d-flex flex-column w-50 mt-5 bg-light" >
      <div class="row justify-content-center ">
        <h1>Sign Up</h1><br>
      </div>
      <h6 id="errorLog" class="text-muted row justify-content-center"></h6>
      <form id="form1"> 
        <div class="form-group px-2">
          <label for="fullname">Enter your full name:</label><br>
          <input type="text" id="fullname" name="fullname" class="form-control">
        </div>
  
        <div class="form-group px-2">
          <label for="email">Enter your email:</label><br>
          <input type="text" id="email" name="email" class="form-control">
        </div>
  
        <div class="form-group px-2">
          <label for="password">Enter your password:</label><br>
          <input type="password" id="password" name="password" class="form-control">
        </div>
  
        <div class="form-group px-2">
          <label for="pwConfirm">Confirm password:</label><br>
          <input type="password" id="pwConfirm" name="pwConfirm" class="form-control">
        </div>
  
        <div class="form-group px-2">
          <label for="city">Enter your city (City, State, Country):</label><br>
          <input type="text" id ="city" name="city" class="form-control">
        </div>
  
        <div class="row justify-content-center">
          <input type="button" value="Sign Up" id="submit" class="btn btn-secondary"><br>
        </div>
        <br>
        <div class="pl-2 mb-3">
          <a href='./login.html'>Already signed up? Login here</a>
        </div>
      </form>
    </div>
  </div>
  
  <br><br><footer></footer>
  <div class="bg-light text-center mb-2">
      <h3>Daily Walking Advisor</h3>
      <p> <lead>Reminding users to take the best possible walk everyday</lead></p>
    </div>
      <div class="d-flex flex-row justify-content-center mb-3">
          <a href = "about.html"> ABOUT</a>
      </div>
  </footer>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.0/axios.min.js"></script>
  
  <script type="module">
import {formData, passwordCheck, redirectToHome, formChecker} from './javascript/script.js';
const url = 'http://localhost:80/signup';
const message = "errorLog";
  function signUp () {
    if (formChecker(message) && passwordCheck())
    axios.post(url, formData()
    )
    .then((response) => {
        document.getElementById('form1').reset();
        console.log(response);
        document.getElementById('errorLog').innerHTML = "Your signup was successful. You may login.";
    }, (error) => {
        console.log(error);
        document.getElementById('errorLog').innerHTML = "Your email is taken. Please use another email.";
        
    })
} 
document.getElementById('submit').addEventListener('click', signUp); 
  </script>

</body>
</html>